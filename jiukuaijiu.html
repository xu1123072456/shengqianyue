<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/index.css">
    <script src="./js/jQuery.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <title>Document</title>
</head>
<body>
    <div class="nav">
        <div class="welcome">
            <h3>欢迎来到拼多多商城</h3>
            <div class="join">
                <a href="denglu.html">登录</a>
                <span>|</span>
                <a href="zhuce.html">注册</a>
            </div>
        </div>
        <div class="container">
            <div class="warp">
                <a class="logo" href=""><img src="./imges/pdd_logo_v2.png" alt=""></a>
                <ul class="dh">
                    <li><a href="">首页</a></li>
                    <li><a href="">商家入驻</a></li>
                    <li><a href="">热点资讯</a></li>
                    <li><a href="">社会招聘</a></li>
                    <li><a href="">校园招聘</a></li>
                    <li><a href="">招采平台</a></li>
                    <li><a href="">帮助中心</a></li>
                    <li><a href="">举报平台</a></li>
                    <li><a class="fenx" href="">分享赚钱</a></li>
                </ul>
            </div>
        </div> 
        <div class="container temai cf">
            <ul>
                <li class="li1">商品分类</li>
                <li><a href="javascript:;">商品特卖</a></li>
                <li><a href="javascript:;">9.9包邮</a></li>
                <li><a href="javascript:;">19.9特卖</a></li>
                <li><a href="javascript:;">秒杀专场</a></li>
            </ul>
        </div>
    </div>
    <div class="container fenlei">
        <div class="sous">
            <input class="zhi" type="text">
            <button type="button" class="btn ss btn-info">搜索</button>
        </div>
        <div class="cont">
            <ul class="row fen">
                <!-- <li class="col-md-2 col-sm-3">
                    <div class="lei">
                        <img src="./imges/timg 3.jpg" alt="">
                        <h4>sdsdad</h4>
                    </div>
                </li> -->
            </ul>
            <div>
                <h3 class="bao">爆款商品推荐</h3>
            </div>
            <div class="row baokuan">
                <!-- <div class="shop col-md-3 col-sm-4">
                    <div class="shopimg">
                        <img src="./imges/timg 3.jpg" alt="">
                    </div>
                    <p>傻大姐撒谎的就撒三打两建sad回家啊是的涉及到哈萨克接电话</p>
                    <div class="jia">
                        <span class="sp1">￥333</span>
                        <span class="sp2">销量：22件</span>
                    </div>
                </div> -->
            </div>
        </div>
        <div class="pageNav">
			<ul>
				<li class="cur"></li>
				<li></li>
				<li></li>
				<li></li>
				<li></li>
				<li></li>
				<li></li>
			</ul>
		</div>
    </div>
    <div class="line">
        <div class="bottom">
            <ul class="ewm">
                <li>
                    <img src="./imges/ewm1.png" alt="">
                    <span>扫描二维码微信关注</span>
                </li>
                <li>
                    <img src="./imges/ewm2.png" alt="">
                    <span>扫描二维码下载App</span>
                </li>
                <li>
                    <img src="./imges/ewm3.png" alt="">
                    <span>微信扫码免费领取拼多多店铺</span>
                </li>
            </ul>
            <div class="xi"></div>
            <div class="lx">
                <h3>联系我们</h3>
                <p>客服&举报电话：021-53395288（推荐）或400-8822-528</p>
                <p>商家热线：021-5339-5088</p>
                <p>商家客服服务时间：8:00-20:30</p>
                <p>消费者客服服务时间：8:00-21:30</p>
                <p>消费者客服外呼号码显示：9541366（仅呼出，不支持呼入）</p>
                <p>上海寻梦信息技术有限公司</p>
            </div>
        </div>
    </div>
    <div class="bx">
        <ul class="botul cf">
            <li class="li1"><a href="">入驻多多国际</a></li>
            <li><a href="">校园招聘</a></li>
            <li><a href="">关于我们</a></li>
            <li><a href="">帮助中心</a></li>
            <li><a href="">下载APP</a></li>
            <li><a href="">消费者保障</a></li>
            <li><a href="">维权投诉指引</a></li>
            <li><a href="">廉政举报</a></li>
            <li><a href="">服务协议</a></li>
            <li><a href="">隐私政策</a></li>
            <li><a href="">征求意见</a></li>
            <li><a href="">征求意见</a></li>
            <li><a href="">Investor Relations</a></li>
        </ul>
    </div>
    <div class="hei">
        <div class="bx pp">
            
            <p>Copyright 2015-2020 pinduoduo.com 版权所有<span>(增值电信业务经营许可证：沪B2-20170215)</span></p>
            <p>互联网药品信息服务资格证书：（沪）-经营性-2019-0052</p>
            <p><span>（沪）网械平台备字[2018]第00003号</span><span class="span1">（沪）网械平台备字[2018]第00003号</span><span>（沪）网械平台备字[2018]第00003号</span></p>
        </div>
    </div>

    <script>    
        var guan;
        var gg = decodeURI(location.search.slice(location.search.indexOf("=")+1));
        if(gg){
            guan = gg;
        }else(
            guan = "爆款商品"
        )
        console.log(guan)

        $.ajax({
            url:"http://127.0.0.1/w/website/findGoodsTypeList",
            type:"get",
            data:{},
            success:function(res){
                console.log(res)
                for(var i = 0; i < res.data.length; i++){
                    $(".fen").append(
                        `<li class="col-md-2 col-sm-3">
                            <div class="lei">
                                <div class="leiii">
                                <img src="${res.data[i].icon}" alt="">
                                </div>
                                <h4>${res.data[i].name}</h4>
                            </div>
                        </li>`
                    )
                }
                $(".fen li").click(function(){
                    pageNum = 1;
                    guan = $(this).text();
                    clickPaging()
                        te(guan,pageNum);
                    })

            }
        })

        function te(guan,name){
            $.ajax({
            url:"http://127.0.0.1/w/website/findGoodsList",
            type:"get",
            data:{
                info:guan,
                pageNo:name
            },
            success:function(bao){
                console.log(bao)
                var htm = "";
                var a = bao.data.tbk_dg_material_optional_response.result_list.map_data;
                for(var i = 0; i < a.length; i++){
                    htm += 
                        `<div class="shop col-md-3 col-sm-4">
                            <a class="tiao" href="cpxq.html?id=${a[i].item_id}">
                            <div class="shopimg">
                                <img src="${a[i].pict_url}" alt="">
                            </div>
                            <p>${a[i].title}</p>
                            <div class="jia">
                                <span class="sp1">￥${a[i].zk_final_price}</span>
                                <span class="sp2">销量：${a[i].commission_rate}件</span>
                            </div>
                            </a>
                        </div>`
                    
                }
                $(".baokuan").html(htm);
            }

        })
        }

        te(guan,pageNum)
        $(".temai a").click(function(){
            // $(".fen").css("display","none")
            pageNum = 1;
            clickPaging()
            te($(this).html())
        })
        $(".ss").click(function(){
            guan = $(".zhi").val()
            if(guan){
            pageNum = 1;
            clickPaging()
            te(guan,pageNum);
            }
        })
        
        var pageNum=1;
        var maxPage=9;
        function clickPaging(){
                if(pageNum>=1&&pageNum<=3){
                    $(".pageNav ul li").eq(0).html("1");
                    $(".pageNav ul li").eq(1).html("2");
                    $(".pageNav ul li").eq(2).html("3");
                    $(".pageNav ul li").eq(3).html("4");
                    $(".pageNav ul li").eq(4).html("……");
                    $(".pageNav ul li").eq(5).html(maxPage-1);
                    $(".pageNav ul li").eq(6).html(maxPage);
                    $(".pageNav ul li").eq(pageNum-1).addClass("cur").siblings().removeClass("cur");
                }else if(pageNum<=maxPage&&pageNum>=maxPage-2){
                    $(".pageNav ul li").eq(0).html("1");
                    $(".pageNav ul li").eq(1).html("2");
                    $(".pageNav ul li").eq(2).html("……");
                    $(".pageNav ul li").eq(3).html(maxPage-3);
                    $(".pageNav ul li").eq(4).html(maxPage-2);
                    $(".pageNav ul li").eq(5).html(maxPage-1);
                    $(".pageNav ul li").eq(6).html(maxPage);
                    $(".pageNav ul li").eq(pageNum-maxPage-1).addClass("cur").siblings().removeClass("cur");
                }else{
                    $(".pageNav ul li").eq(0).html("1");
                    $(".pageNav ul li").eq(1).html("……");
                    $(".pageNav ul li").eq(2).html(pageNum-1);
                    $(".pageNav ul li").eq(3).html(pageNum);
                    $(".pageNav ul li").eq(4).html(pageNum+1);
                    $(".pageNav ul li").eq(5).html("……");
                    $(".pageNav ul li").eq(6).html(maxPage);
                    $(".pageNav ul li").eq(3).addClass("cur").siblings().removeClass("cur");
                }
            }
          
            clickPaging()
            // 监听分页
            bindEvent()
            function bindEvent(){
                $(".pageNav ul li").click(function(event){
                    //写...的那个小格子不能点击
                    if($(this).html()=="……"){
                        return;
                    }
                    // 改变页数
                    pageNum= parseInt($(this).html());
                
                    te(guan,pageNum);
                    clickPaging();
                })
            }
        
    </script>
</body>
</html>